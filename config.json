{
    "client_name": "Opyn",
    "commit_hash": "67a2bff57ec49c4bb7c9c454c8ad945fd5bdcf51",
    "date": "August 2021",
    "date_interval": "August 16 to August 27, 2021",
    "issues": [
        {
            "active_lock_reason": null,
            "assignee": null,
            "assignees": [],
            "author_association": "NONE",
            "body": "**Description**\r\n\r\n`notPartiallyPaused` modifier calls `_isNotPartiallyPaused` function in order to ensure that the state variable `systemPartiallyPaused` is not set to _true_:\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-gamma-2021-08/blob/879977f600169390eb27a169b69ba7c60f7ee614/code/contracts/core/Controller.sol#L218-L221\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-gamma-2021-08/blob/879977f600169390eb27a169b69ba7c60f7ee614/code/contracts/core/Controller.sol#L277-L279\r\n\r\n`_isNotPartiallyPaused` is an internal view function and is not called by any other function. This means that there is added gas costs but also mental energy expenditure for readers of the code and developers maintaining the contract.\r\n\r\nThe same logic applies to `notFullyPaused` and `onlyAuthorized` (they make use internal view functions which  are called only from the modifier).\r\n\r\n**Recommendation**\r\n\r\nInclude the `require` logic directly in the modifiers and delete the obsolete internal functions.\r\n",
            "closed_at": null,
            "comments": 0,
            "comments_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/issues/8/comments",
            "created_at": "2021-08-24T04:09:28Z",
            "events_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/issues/8/events",
            "html_url": "https://github.com/monoceros-alpha/review-opyn-gamma-2021-08/issues/8",
            "id": 977682381,
            "labels": [
                {
                    "color": "667788",
                    "default": false,
                    "description": null,
                    "id": 3265630216,
                    "name": "Report",
                    "node_id": "MDU6TGFiZWwzMjY1NjMwMjE2",
                    "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/labels/Report"
                },
                {
                    "color": "FFCC00",
                    "default": false,
                    "description": null,
                    "id": 3265630277,
                    "name": "Minor",
                    "node_id": "MDU6TGFiZWwzMjY1NjMwMjc3",
                    "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/labels/Minor"
                }
            ],
            "labels_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/issues/8/labels{/name}",
            "locked": false,
            "milestone": null,
            "node_id": "MDU6SXNzdWU5Nzc2ODIzODE=",
            "number": 8,
            "performed_via_github_app": null,
            "repository_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08",
            "state": "open",
            "title": "`notPartiallyPaused`, `notFullyPaused` and `onlyAuthorized` modifiers have unnecessary function counterparts",
            "updated_at": "2021-08-24T04:09:28Z",
            "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/issues/8",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/342638?v=4",
                "events_url": "https://api.github.com/users/andreiashu/events{/privacy}",
                "followers_url": "https://api.github.com/users/andreiashu/followers",
                "following_url": "https://api.github.com/users/andreiashu/following{/other_user}",
                "gists_url": "https://api.github.com/users/andreiashu/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/andreiashu",
                "id": 342638,
                "login": "andreiashu",
                "node_id": "MDQ6VXNlcjM0MjYzOA==",
                "organizations_url": "https://api.github.com/users/andreiashu/orgs",
                "received_events_url": "https://api.github.com/users/andreiashu/received_events",
                "repos_url": "https://api.github.com/users/andreiashu/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/andreiashu/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/andreiashu/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/andreiashu"
            }
        },
        {
            "active_lock_reason": null,
            "assignee": null,
            "assignees": [],
            "author_association": "CONTRIBUTOR",
            "body": "**Description**\r\n\r\nA user can call `operate` with a number of actions they want to execute in one transaction.\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-gamma-2021-08/blob/879977f600169390eb27a169b69ba7c60f7ee614/code/contracts/core/Controller.sol#L426-L437\r\n\r\nThese actions can be very specific to the system currently being reviewed, but they can also be more generic. The generic actions can be specified by sending an action of type `Actions.ActionType.Call`.\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-gamma-2021-08/blob/879977f600169390eb27a169b69ba7c60f7ee614/code/contracts/core/Controller.sol#L685-L687\r\n\r\nThe method `_call` does an external call to a specified contract.\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-gamma-2021-08/blob/879977f600169390eb27a169b69ba7c60f7ee614/code/contracts/core/Controller.sol#L1037\r\n\r\nThis can be used as a callback function to trigger external code the user needs in between the vault-related actions.\r\n\r\nThere is also a modifier on top of this method that only allows a specific set of external contracts or any contract.\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-gamma-2021-08/blob/879977f600169390eb27a169b69ba7c60f7ee614/code/contracts/core/Controller.sol#L262-L272\r\n\r\nThis functionality is significantly restricted in a few ways:\r\n\r\n- `Controller` contract calls only a specific method of the destination contract `.callFunction`\r\n- list of arguments is fixed and already set up `(msg.sender, _args.data)`\r\n\r\nThe result of the execution is not processed in any way. Whether the call fails or succeeds, the execution is not affected.\r\n\r\nConsider the following setup which makes an external call and emits different events based on the execution result.\r\n\r\n```solidity\r\ncontract External {\r\n    bool public shouldFail;\r\n    \r\n    function setFail(bool _shouldFail) public {\r\n        shouldFail = _shouldFail;\r\n    }\r\n    \r\n    function maybeFail() public {\r\n        if (shouldFail) {\r\n            revert(\"Emitted error\");\r\n        }\r\n    }\r\n}\r\n\r\ncontract Caller {\r\n    External public e;\r\n    \r\n    constructor () {\r\n        e = new External();\r\n    } \r\n    \r\n    function callMaybeFail() external {\r\n        try e.maybeFail() {\r\n            emit Success();\r\n        } catch Error(string memory _reason) {\r\n            emit ResultString(false, _reason);\r\n        } catch (bytes memory _lowLevelReason) {\r\n            emit ResultBytes(false, _lowLevelReason);\r\n        }\r\n    }\r\n    \r\n    event ResultBytes(bool, bytes);\r\n    event ResultString(bool, string);\r\n    event Success();\r\n}\r\n```\r\n\r\nThe example above lets the contract behave differently based on the success of the execution. It is unclear whether this additional functionality is needed or required in the current context. Additional complexity needs to be added in order to complete the functionality.\r\n\r\nExtreme care needs to be taken if the external call functionality is extended.\r\n\r\nIn its current form, it seems like a very limited type of functionality, but an extension of this functionality easily brings major security problems.\r\n\r\nA clearer, more specific description of the required functionality needs to be reviewed before implementing anything else in this direction.\r\n\r\n**Recommendation**\r\n\r\nConsider reviewing a more specific implementation plan before going forward with this functionality.",
            "closed_at": null,
            "comments": 0,
            "comments_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/issues/7/comments",
            "created_at": "2021-08-23T08:26:15Z",
            "events_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/issues/7/events",
            "html_url": "https://github.com/monoceros-alpha/review-opyn-gamma-2021-08/issues/7",
            "id": 976768087,
            "labels": [
                {
                    "color": "667788",
                    "default": false,
                    "description": null,
                    "id": 3265630216,
                    "name": "Report",
                    "node_id": "MDU6TGFiZWwzMjY1NjMwMjE2",
                    "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/labels/Report"
                },
                {
                    "color": "34C759",
                    "default": false,
                    "description": null,
                    "id": 3265630228,
                    "name": "Informational",
                    "node_id": "MDU6TGFiZWwzMjY1NjMwMjI4",
                    "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/labels/Informational"
                },
                {
                    "color": "6B08DC",
                    "default": false,
                    "description": null,
                    "id": 3265630456,
                    "name": "WIP",
                    "node_id": "MDU6TGFiZWwzMjY1NjMwNDU2",
                    "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/labels/WIP"
                }
            ],
            "labels_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/issues/7/labels{/name}",
            "locked": false,
            "milestone": null,
            "node_id": "MDU6SXNzdWU5NzY3NjgwODc=",
            "number": 7,
            "performed_via_github_app": null,
            "repository_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08",
            "state": "open",
            "title": "External contract calls have unclear purpose",
            "updated_at": "2021-08-27T14:11:12Z",
            "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/issues/7",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/547012?v=4",
                "events_url": "https://api.github.com/users/cleanunicorn/events{/privacy}",
                "followers_url": "https://api.github.com/users/cleanunicorn/followers",
                "following_url": "https://api.github.com/users/cleanunicorn/following{/other_user}",
                "gists_url": "https://api.github.com/users/cleanunicorn/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cleanunicorn",
                "id": 547012,
                "login": "cleanunicorn",
                "node_id": "MDQ6VXNlcjU0NzAxMg==",
                "organizations_url": "https://api.github.com/users/cleanunicorn/orgs",
                "received_events_url": "https://api.github.com/users/cleanunicorn/received_events",
                "repos_url": "https://api.github.com/users/cleanunicorn/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cleanunicorn/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cleanunicorn/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cleanunicorn"
            }
        },
        {
            "active_lock_reason": null,
            "assignee": null,
            "assignees": [],
            "author_association": "CONTRIBUTOR",
            "body": "**Description**\r\n\r\nThere are a few methods that are only called once.\r\n\r\n- `_isNotPartiallyPaused`\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-gamma-2021-08/blob/879977f600169390eb27a169b69ba7c60f7ee614/code/contracts/core/Controller.sol#L215-L222\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-gamma-2021-08/blob/879977f600169390eb27a169b69ba7c60f7ee614/code/contracts/core/Controller.sol#L274-L279\r\n\r\n- `_isNotFullyPaused`\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-gamma-2021-08/blob/879977f600169390eb27a169b69ba7c60f7ee614/code/contracts/core/Controller.sol#L224-L231\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-gamma-2021-08/blob/879977f600169390eb27a169b69ba7c60f7ee614/code/contracts/core/Controller.sol#L281-L286\r\n\r\n- `_isAuthorized`\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-gamma-2021-08/blob/879977f600169390eb27a169b69ba7c60f7ee614/code/contracts/core/Controller.sol#L251-L260\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-gamma-2021-08/blob/879977f600169390eb27a169b69ba7c60f7ee614/code/contracts/core/Controller.sol#L288-L295\r\n\r\n**Recommendation**\r\n\r\nIn order to reduce code complexity and reduce gas costs, the methods can be removed and their body can be added directly in the respective modifier.\r\n",
            "closed_at": "2021-08-27T14:12:46Z",
            "comments": 0,
            "comments_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/issues/6/comments",
            "created_at": "2021-08-23T07:58:18Z",
            "events_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/issues/6/events",
            "html_url": "https://github.com/monoceros-alpha/review-opyn-gamma-2021-08/issues/6",
            "id": 976741552,
            "labels": [
                {
                    "color": "FFCC00",
                    "default": false,
                    "description": null,
                    "id": 3265630277,
                    "name": "Minor",
                    "node_id": "MDU6TGFiZWwzMjY1NjMwMjc3",
                    "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/labels/Minor"
                }
            ],
            "labels_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/issues/6/labels{/name}",
            "locked": false,
            "milestone": null,
            "node_id": "MDU6SXNzdWU5NzY3NDE1NTI=",
            "number": 6,
            "performed_via_github_app": null,
            "repository_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08",
            "state": "closed",
            "title": "Reduce the number of methods where possible",
            "updated_at": "2021-08-27T14:12:46Z",
            "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/issues/6",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/547012?v=4",
                "events_url": "https://api.github.com/users/cleanunicorn/events{/privacy}",
                "followers_url": "https://api.github.com/users/cleanunicorn/followers",
                "following_url": "https://api.github.com/users/cleanunicorn/following{/other_user}",
                "gists_url": "https://api.github.com/users/cleanunicorn/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cleanunicorn",
                "id": 547012,
                "login": "cleanunicorn",
                "node_id": "MDQ6VXNlcjU0NzAxMg==",
                "organizations_url": "https://api.github.com/users/cleanunicorn/orgs",
                "received_events_url": "https://api.github.com/users/cleanunicorn/received_events",
                "repos_url": "https://api.github.com/users/cleanunicorn/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cleanunicorn/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cleanunicorn/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cleanunicorn"
            }
        },
        {
            "active_lock_reason": null,
            "assignee": null,
            "assignees": [],
            "author_association": "NONE",
            "body": "**Description**\r\n\r\n`donate` function seems to allow users to donate an `_amount` of tokens of `_asset` to the margin pool:\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-gamma-2021-08/blob/879977f600169390eb27a169b69ba7c60f7ee614/code/contracts/core/Controller.sol#L316-L322\r\n\r\n`transferToPool` is used in order to transfer the tokens from the user to the pool. This function takes care of the internal accounting inside the `MarginPool` contract and updates the `assetBalance` accordingly:\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-gamma-2021-08/blob/879977f600169390eb27a169b69ba7c60f7ee614/code/contracts/core/MarginPool.sol#L74-L83\r\n\r\nWe believe that the `farm` function was intended to be the one that would allow a designated farm account to withdraw the funds that were donated into the pool (ie. the difference between what is in the contract and `assetBalance`):\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-gamma-2021-08/blob/879977f600169390eb27a169b69ba7c60f7ee614/code/contracts/core/MarginPool.sol#L173-L178\r\n\r\nHowever, the issue is that because `transferToPool` also updates the internal accounting in the `assetBalance` mapping, the `require` at line L176 in `MarginPool` contract will fail for any value of `_amount` higher than 0.  Because the difference between the funds in the contract (`externalBalance `) and the amount accounted in the `assetBalance` mapping (`storedBalance`) will be 0 (*).  This leads to the situation where the donated funds are stuck in the contract:\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-gamma-2021-08/blob/879977f600169390eb27a169b69ba7c60f7ee614/code/contracts/core/MarginPool.sol#L176\r\n\r\n(*) this is true as long as users follow the recommendation in the `donate` documentation and only send transfers via this function. Any tokens sent _directly_ to the `MarginPool` by use of `transfer` can actually be _withdrawn_ / _farmed_.\r\n\r\n**Recommendation**\r\n\r\nSince this is a live contract and other systems might already be aware of the external `donate` function, it might make sense to just do a `ERC20Interface(_asset).safeTransfer` call directly, without calling the `transferToPool`. This way, when the `farm` function is called, the `ERC20Interface(_asset).balanceOf` call in `MarginPool` contract will indeed be higher than the `assetBalance[_asset]` and the difference can be farmed.\r\n",
            "closed_at": null,
            "comments": 0,
            "comments_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/issues/5/comments",
            "created_at": "2021-08-23T07:58:07Z",
            "events_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/issues/5/events",
            "html_url": "https://github.com/monoceros-alpha/review-opyn-gamma-2021-08/issues/5",
            "id": 976741417,
            "labels": [
                {
                    "color": "667788",
                    "default": false,
                    "description": null,
                    "id": 3265630216,
                    "name": "Report",
                    "node_id": "MDU6TGFiZWwzMjY1NjMwMjE2",
                    "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/labels/Report"
                },
                {
                    "color": "FF9500",
                    "default": false,
                    "description": null,
                    "id": 3265630320,
                    "name": "Medium",
                    "node_id": "MDU6TGFiZWwzMjY1NjMwMzIw",
                    "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/labels/Medium"
                }
            ],
            "labels_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/issues/5/labels{/name}",
            "locked": false,
            "milestone": null,
            "node_id": "MDU6SXNzdWU5NzY3NDE0MTc=",
            "number": 5,
            "performed_via_github_app": null,
            "repository_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08",
            "state": "open",
            "title": "Donate can lock funds in certain situations",
            "updated_at": "2021-08-27T14:04:38Z",
            "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/issues/5",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/342638?v=4",
                "events_url": "https://api.github.com/users/andreiashu/events{/privacy}",
                "followers_url": "https://api.github.com/users/andreiashu/followers",
                "following_url": "https://api.github.com/users/andreiashu/following{/other_user}",
                "gists_url": "https://api.github.com/users/andreiashu/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/andreiashu",
                "id": 342638,
                "login": "andreiashu",
                "node_id": "MDQ6VXNlcjM0MjYzOA==",
                "organizations_url": "https://api.github.com/users/andreiashu/orgs",
                "received_events_url": "https://api.github.com/users/andreiashu/received_events",
                "repos_url": "https://api.github.com/users/andreiashu/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/andreiashu/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/andreiashu/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/andreiashu"
            }
        },
        {
            "active_lock_reason": null,
            "assignee": null,
            "assignees": [],
            "author_association": "CONTRIBUTOR",
            "body": "**Description**\r\n\r\nAny actor can call `Controller.donate()` to push some ERC20 tokens into the pool.\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-gamma-2021-08/blob/879977f600169390eb27a169b69ba7c60f7ee614/code/contracts/core/Controller.sol#L315-L325\r\n\r\nThere are other instances where tokens are pushed into the pool, but an additional whitelist validation is done in each case.\r\n\r\n**_depositLong**\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-gamma-2021-08/blob/879977f600169390eb27a169b69ba7c60f7ee614/code/contracts/core/Controller.sol#L726-L731\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-gamma-2021-08/blob/879977f600169390eb27a169b69ba7c60f7ee614/code/contracts/core/Controller.sol#L740\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-gamma-2021-08/blob/879977f600169390eb27a169b69ba7c60f7ee614/code/contracts/core/Controller.sol#L748\r\n\r\n**_depositCollateral**\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-gamma-2021-08/blob/879977f600169390eb27a169b69ba7c60f7ee614/code/contracts/core/Controller.sol#L776-L781\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-gamma-2021-08/blob/879977f600169390eb27a169b69ba7c60f7ee614/code/contracts/core/Controller.sol#L790\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-gamma-2021-08/blob/879977f600169390eb27a169b69ba7c60f7ee614/code/contracts/core/Controller.sol#L802\r\n\r\nIn order to keep the same rigorous accounting of only whitelisted tokens being accounted for in the pool, a whitelist check should be done in `donate` before transferring tokens.\r\n\r\n**Recommendation**\r\n\r\nAdd an additional `require` check to validate the transferred token to the pool in the method `donate`.",
            "closed_at": null,
            "comments": 0,
            "comments_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/issues/4/comments",
            "created_at": "2021-08-23T07:57:37Z",
            "events_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/issues/4/events",
            "html_url": "https://github.com/monoceros-alpha/review-opyn-gamma-2021-08/issues/4",
            "id": 976741055,
            "labels": [
                {
                    "color": "667788",
                    "default": false,
                    "description": null,
                    "id": 3265630216,
                    "name": "Report",
                    "node_id": "MDU6TGFiZWwzMjY1NjMwMjE2",
                    "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/labels/Report"
                },
                {
                    "color": "FF9500",
                    "default": false,
                    "description": null,
                    "id": 3265630320,
                    "name": "Medium",
                    "node_id": "MDU6TGFiZWwzMjY1NjMwMzIw",
                    "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/labels/Medium"
                }
            ],
            "labels_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/issues/4/labels{/name}",
            "locked": false,
            "milestone": null,
            "node_id": "MDU6SXNzdWU5NzY3NDEwNTU=",
            "number": 4,
            "performed_via_github_app": null,
            "repository_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08",
            "state": "open",
            "title": "`donate` should make sure the assets handled are part of the whitelist",
            "updated_at": "2021-08-27T14:11:16Z",
            "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/issues/4",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/547012?v=4",
                "events_url": "https://api.github.com/users/cleanunicorn/events{/privacy}",
                "followers_url": "https://api.github.com/users/cleanunicorn/followers",
                "following_url": "https://api.github.com/users/cleanunicorn/following{/other_user}",
                "gists_url": "https://api.github.com/users/cleanunicorn/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cleanunicorn",
                "id": 547012,
                "login": "cleanunicorn",
                "node_id": "MDQ6VXNlcjU0NzAxMg==",
                "organizations_url": "https://api.github.com/users/cleanunicorn/orgs",
                "received_events_url": "https://api.github.com/users/cleanunicorn/received_events",
                "repos_url": "https://api.github.com/users/cleanunicorn/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cleanunicorn/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cleanunicorn/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cleanunicorn"
            }
        },
        {
            "active_lock_reason": null,
            "assignee": null,
            "assignees": [],
            "author_association": "CONTRIBUTOR",
            "body": "**Description**\r\n\r\nA user can open a vault by calling `Controller.operate()` with a list of actions. One of those actions can be an open vault action.\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-gamma-2021-08/blob/879977f600169390eb27a169b69ba7c60f7ee614/code/contracts/core/Controller.sol#L426-L432\r\n\r\nEach of those actions is executed in the controller, in the internal method `Controller._runActions`.\r\n\r\nIf the action type is equal to `Actions.ActionType.OpenVault`, a new vault is opened for the user.\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-gamma-2021-08/blob/879977f600169390eb27a169b69ba7c60f7ee614/code/contracts/core/Controller.sol#L665-L666\r\n\r\nBut first the arguments needed are parsed by `Actions._parseOpenVaultArgs`.\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-gamma-2021-08/blob/879977f600169390eb27a169b69ba7c60f7ee614/code/contracts/libs/Actions.sol#L184-L189\r\n\r\nThe vault type is encoded in the `_args.data` property.\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-gamma-2021-08/blob/879977f600169390eb27a169b69ba7c60f7ee614/code/contracts/libs/Actions.sol#L196-L202\r\n\r\nThis value is checked to be valid (only type 0 and 1 accepted), but it defaults to 0. If the encoded sent data is invalid, the type defaults to 0. If the `_args.data.length` is not of size 32, the vault type defaults to 0.\r\n\r\n**Recommendation**\r\n\r\nIt might help ensure the encoded data is valid by having a stricter validation of the input data.\r\n\r\nA similar check is already done in `_parseLiquidateArgs`.\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-gamma-2021-08/blob/879977f600169390eb27a169b69ba7c60f7ee614/code/contracts/libs/Actions.sol#L323\r\n",
            "closed_at": null,
            "comments": 0,
            "comments_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/issues/3/comments",
            "created_at": "2021-08-17T15:00:47Z",
            "events_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/issues/3/events",
            "html_url": "https://github.com/monoceros-alpha/review-opyn-gamma-2021-08/issues/3",
            "id": 972785342,
            "labels": [
                {
                    "color": "667788",
                    "default": false,
                    "description": null,
                    "id": 3265630216,
                    "name": "Report",
                    "node_id": "MDU6TGFiZWwzMjY1NjMwMjE2",
                    "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/labels/Report"
                },
                {
                    "color": "FFCC00",
                    "default": false,
                    "description": null,
                    "id": 3265630277,
                    "name": "Minor",
                    "node_id": "MDU6TGFiZWwzMjY1NjMwMjc3",
                    "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/labels/Minor"
                }
            ],
            "labels_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/issues/3/labels{/name}",
            "locked": false,
            "milestone": null,
            "node_id": "MDU6SXNzdWU5NzI3ODUzNDI=",
            "number": 3,
            "performed_via_github_app": null,
            "repository_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08",
            "state": "open",
            "title": "Opening a vault type defaults to type zero",
            "updated_at": "2021-08-23T11:11:36Z",
            "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/issues/3",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/547012?v=4",
                "events_url": "https://api.github.com/users/cleanunicorn/events{/privacy}",
                "followers_url": "https://api.github.com/users/cleanunicorn/followers",
                "following_url": "https://api.github.com/users/cleanunicorn/following{/other_user}",
                "gists_url": "https://api.github.com/users/cleanunicorn/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cleanunicorn",
                "id": 547012,
                "login": "cleanunicorn",
                "node_id": "MDQ6VXNlcjU0NzAxMg==",
                "organizations_url": "https://api.github.com/users/cleanunicorn/orgs",
                "received_events_url": "https://api.github.com/users/cleanunicorn/received_events",
                "repos_url": "https://api.github.com/users/cleanunicorn/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cleanunicorn/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cleanunicorn/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cleanunicorn"
            }
        },
        {
            "active_lock_reason": null,
            "assignee": null,
            "assignees": [],
            "author_association": "CONTRIBUTOR",
            "body": "**Description**\r\n\r\nThe contract `PermitCallee` uses the [EIP-2612: permit \u2013 712-signed approvals](https://eips.ethereum.org/EIPS/eip-2612) standard to update the allowance for a user, using a provided signature.\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-gamma-2021-08/blob/879977f600169390eb27a169b69ba7c60f7ee614/code/contracts/external/callees/PermitCallee.sol#L11-L31\r\n\r\nThis standard isn't officially recommended anymore and will likely change in the future. This might be because of [EIP-3074: AUTH and AUTHCALL opcodes](https://eips.ethereum.org/EIPS/eip-3074).\r\n\r\n**Recommendation**\r\n\r\nConsider deprecating or not relying too much on the currently implemented functionality and consider using the more flexible **EIP-3074: AUTH and AUTHCALL opcodes**.\r\n",
            "closed_at": null,
            "comments": 0,
            "comments_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/issues/2/comments",
            "created_at": "2021-08-17T14:40:39Z",
            "events_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/issues/2/events",
            "html_url": "https://github.com/monoceros-alpha/review-opyn-gamma-2021-08/issues/2",
            "id": 972764718,
            "labels": [
                {
                    "color": "667788",
                    "default": false,
                    "description": null,
                    "id": 3265630216,
                    "name": "Report",
                    "node_id": "MDU6TGFiZWwzMjY1NjMwMjE2",
                    "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/labels/Report"
                },
                {
                    "color": "34C759",
                    "default": false,
                    "description": null,
                    "id": 3265630228,
                    "name": "Informational",
                    "node_id": "MDU6TGFiZWwzMjY1NjMwMjI4",
                    "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/labels/Informational"
                }
            ],
            "labels_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/issues/2/labels{/name}",
            "locked": false,
            "milestone": null,
            "node_id": "MDU6SXNzdWU5NzI3NjQ3MTg=",
            "number": 2,
            "performed_via_github_app": null,
            "repository_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08",
            "state": "open",
            "title": "EIP-2612 permit is likely to change",
            "updated_at": "2021-08-17T15:10:55Z",
            "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/issues/2",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/547012?v=4",
                "events_url": "https://api.github.com/users/cleanunicorn/events{/privacy}",
                "followers_url": "https://api.github.com/users/cleanunicorn/followers",
                "following_url": "https://api.github.com/users/cleanunicorn/following{/other_user}",
                "gists_url": "https://api.github.com/users/cleanunicorn/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cleanunicorn",
                "id": 547012,
                "login": "cleanunicorn",
                "node_id": "MDQ6VXNlcjU0NzAxMg==",
                "organizations_url": "https://api.github.com/users/cleanunicorn/orgs",
                "received_events_url": "https://api.github.com/users/cleanunicorn/received_events",
                "repos_url": "https://api.github.com/users/cleanunicorn/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cleanunicorn/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cleanunicorn/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cleanunicorn"
            }
        },
        {
            "active_lock_reason": null,
            "assignee": null,
            "assignees": [],
            "author_association": "CONTRIBUTOR",
            "body": "**Description**\r\n\r\nA user can call `Controller.sync()` to update their vault's latest timestamp.\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-gamma-2021-08/blob/ee386cf23a1b3992c46a8d5ec85fbc216e80dea8/code/contracts/core/Controller.sol#L439-L449\r\n\r\nThis timestamp is important when a vault is liquidated. The method `MarginCalculator.isLiquidatable` needs the vault's timestamp to be in the past as compared to the current timestamp.\r\n\r\nhttps://github.com/monoceros-alpha/review-opyn-gamma-2021-08/blob/ee386cf23a1b3992c46a8d5ec85fbc216e80dea8/code/contracts/core/MarginCalculator.sol#L445-L449\r\n\r\nIf the vault was at some point in the past liquidatable, but now it isn't anymore, it could be liquidated, unless the user (or a benefactor) updates the user's vault by calling `Controller.sync(address _owner, uint256 _vaultId)`.\r\n\r\nAlso, if anyone is watching the blockchain and they see a transaction in the mempool calling `Controller.sync()` they can assume (and verify) if that vault could be liquidated. They could front-run the `Controller.sync()` transaction and liquidate the vault before the timestamp is updated.\r\n\r\nThe method seems to be vulnerable to front-running attacks.\r\n\r\n**Recommendation**\r\n\r\nLiquidating a user could check if the user can be liquidated at the time of the execution. This way, the user can't be front-run when trying to sync their vaults.",
            "closed_at": null,
            "comments": 0,
            "comments_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/issues/1/comments",
            "created_at": "2021-08-17T13:07:15Z",
            "events_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/issues/1/events",
            "html_url": "https://github.com/monoceros-alpha/review-opyn-gamma-2021-08/issues/1",
            "id": 972670702,
            "labels": [
                {
                    "color": "667788",
                    "default": false,
                    "description": null,
                    "id": 3265630216,
                    "name": "Report",
                    "node_id": "MDU6TGFiZWwzMjY1NjMwMjE2",
                    "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/labels/Report"
                },
                {
                    "color": "FF9500",
                    "default": false,
                    "description": null,
                    "id": 3265630320,
                    "name": "Medium",
                    "node_id": "MDU6TGFiZWwzMjY1NjMwMzIw",
                    "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/labels/Medium"
                }
            ],
            "labels_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/issues/1/labels{/name}",
            "locked": false,
            "milestone": null,
            "node_id": "MDU6SXNzdWU5NzI2NzA3MDI=",
            "number": 1,
            "performed_via_github_app": null,
            "repository_url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08",
            "state": "open",
            "title": "A user calling `sync` can be front-run",
            "updated_at": "2021-08-27T14:06:50Z",
            "url": "https://api.github.com/repos/monoceros-alpha/review-opyn-gamma-2021-08/issues/1",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/547012?v=4",
                "events_url": "https://api.github.com/users/cleanunicorn/events{/privacy}",
                "followers_url": "https://api.github.com/users/cleanunicorn/followers",
                "following_url": "https://api.github.com/users/cleanunicorn/following{/other_user}",
                "gists_url": "https://api.github.com/users/cleanunicorn/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cleanunicorn",
                "id": 547012,
                "login": "cleanunicorn",
                "node_id": "MDQ6VXNlcjU0NzAxMg==",
                "organizations_url": "https://api.github.com/users/cleanunicorn/orgs",
                "received_events_url": "https://api.github.com/users/cleanunicorn/received_events",
                "repos_url": "https://api.github.com/users/cleanunicorn/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cleanunicorn/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cleanunicorn/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cleanunicorn"
            }
        }
    ],
    "person_days": "20",
    "project_name": "Gamma Protocol",
    "review_period": "2 weeks",
    "source_repository": "https://github.com/opynfinance/GammaProtocol.git",
    "template": "./Readme.md.mustache"
}