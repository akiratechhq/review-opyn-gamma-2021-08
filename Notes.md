- [x] core/Controller.sol
    - [x] [Int] _isNotPartiallyPaused
      - [x] Requires that the system is not partially paused, does not return true/false, just fails. 
      - [x] Maybe it's a function because of the contract size?
        - No, because it's called only once.
    - [x] [Int] _isNotFullyPaused
      - [x] Same as `_isNotPartiallyPaused`
    - [x] [Int] _isAuthorized
      - [x] Same as `_isNotPartiallyPaused`
    - [x] [Ext] initialize #
       - modifiers: initializer
    - [x] [Ext] donate #
      - [x] Calls an external contract to transfer funds to itself.
    - [x] [Ext] setSystemPartiallyPaused #
       - modifiers: onlyPartialPauser
    - [x] [Ext] setSystemFullyPaused #
       - modifiers: onlyFullPauser
    - [x] [Ext] setFullPauser #
       - modifiers: onlyOwner
    - [x] [Ext] setPartialPauser #
       - modifiers: onlyOwner
    - [x] [Ext] setCallRestriction #
       - modifiers: onlyOwner
         - [x] Setting call restriction to false will allow users to force the contract to call other methods on random (non-whitelisted) contracts.
           - [x] Seems that the method `_call` externally calls `callFunction` on any random contract. So this means that the external call is rather restricted, which isn't clear if it's useful or not.
    - [x] [Ext] setOperator #
      - [x] Gives power to an operator.
    - [x] [Ext] refreshConfiguration #
       - modifiers: onlyOwner
    - [x] [Ext] setNakedCap #
       - modifiers: onlyOwner
    - [x] [Ext] operate #
       - modifiers: nonReentrant,notFullyPaused
         - Why does this have `nonReentrant`?
    - [x] [Ext] sync #
       - modifiers: nonReentrant,notFullyPaused
         - Why does this have `nonReentrant`?
         - [x] One can frontrun the sync()
    - [x] [Ext] isOperator
    - [x] [Ext] getConfiguration
    - [x] [Ext] getProceed
    - [x] [Ext] isLiquidatable
    - [x] [Pub] getPayout
    - [x] [Ext] isSettlementAllowed
    - [x] [Ext] canSettleAssets
    - [x] [Ext] getAccountVaultCounter
    - [x] [Ext] hasExpired
    - [x] [Ext] getVault
    - [x] [Pub] getVaultWithDetails
    - [x] [Ext] getNakedCap
    - [x] [Ext] getNakedPoolBalance
    - [x] [Int] _runActions #
    - [x] [Int] _verifyFinalState
    - [x] [Int] _openVault #
       - modifiers: notPartiallyPaused,onlyAuthorized
    - [x] [Int] _depositLong #
       - modifiers: notPartiallyPaused,onlyAuthorized
    - [x] [Int] _withdrawLong #
       - modifiers: notPartiallyPaused,onlyAuthorized
    - [x] [Int] _depositCollateral #
       - modifiers: notPartiallyPaused,onlyAuthorized
    - [x] [Int] _withdrawCollateral #
       - modifiers: notPartiallyPaused,onlyAuthorized
    - [x] [Int] _mintOtoken #
       - modifiers: notPartiallyPaused,onlyAuthorized
       - [x] Is this free? It doesn't seem to require any payment or anything. o__O
         - No, this is verified by `_verifyFinalState`.
    - [x] [Int] _burnOtoken #
       - modifiers: notPartiallyPaused,onlyAuthorized
    - [x] [Int] _redeem #
    - [x] [Int] _settleVault #
       - modifiers: onlyAuthorized
    - [x] [Int] _liquidate #
       - modifiers: notPartiallyPaused
    - [x] [Int] _call #
       - modifiers: notPartiallyPaused,onlyWhitelistedCallee
    - [x] [Int] _checkVaultId
    - [x] [Int] _isNotEmpty
    - [x] [Int] _isCalleeWhitelisted
    - [x] [Int] _isLiquidatable
    - [x] [Int] _getOtokenDetails
    - [x] [Int] _canSettleAssets
    - [x] [Int] _refreshConfigInternal #

- [x] core/MarginCalculator.sol
    - [x] [Pub] <Constructor> #
    - [x] [Ext] setCollateralDust #
       - modifiers: onlyOwner
    - [x] [Ext] setUpperBoundValues #
       - modifiers: onlyOwner
    - [x] [Ext] updateUpperBoundValue #
       - modifiers: onlyOwner
    - [x] [Ext] setSpotShock #
       - modifiers: onlyOwner
    - [x] [Ext] setOracleDeviation #
       - modifiers: onlyOwner
    - [x] [Ext] getCollateralDust
    - [x] [Ext] getTimesToExpiry
    - [x] [Ext] getMaxPrice
    - [x] [Ext] getSpotShock
    - [x] [Ext] getOracleDeviation
    - [x] [Ext] getNakedMarginRequired
    - [x] [Ext] getExpiredPayoutRate
    - [x] [Ext] isLiquidatable
    - [x] [Ext] getMarginRequired
    - [x] [Pub] getExcessCollateral
    - [x] [Int] _getExpiredCashValue
    - [x] [Int] _getMarginRequired
    - [x] [Int] _getNakedMarginRequired
    - [x] [Int] _findUpperBoundValue
    - [x] [Int] _getPutSpreadMarginRequired
    - [x] [Int] _getCallSpreadMarginRequired
    - [x] [Int] _convertAmountOnLivePrice
    - [x] [Int] _convertAmountOnExpiryPrice
    - [x] [Int] _getDebtPrice
    - [x] [Int] _getVaultDetails
    - [x] [Int] _getExpiredSpreadCashValue
    - [x] [Int] _isNotEmpty
    - [x] [Int] _checkIsValidVault
    - [x] [Int] _isMarginableLong
    - [x] [Int] _isMarginableCollateral
    - [x] [Int] _getProductHash
    - [x] [Int] _getCashValue
    - [x] [Int] _getOtokenDetails

- [x] external/callees/PermitCallee.sol
    - [x] [Ext] callFunction #
      - [x] [EIP-2612](https://eips.ethereum.org/EIPS/eip-2612) not recommended because it is likely to change
      - [x] Replay possible (?)
        - Not possible because the ERC20 implementation should implement it correctly. Check is not in this contract.

- [x] libs/MarginVault.sol
  - [x] Check if you can use the multiple option (even though they say it's not supported)
    - [x] [Ext] addShort #
    - [x] [Ext] removeShort #
    - [x] [Ext] addLong #
    - [x] [Ext] removeLong #
    - [x] [Ext] addCollateral #
    - [x] [Ext] removeCollateral #

Global ideas:
- [x] Can frontrun people when they touch their vaults
- [x] Nobody (Controller should) calls `MarginPool.batchTransferToPool`