- [ ] core/Controller.sol
    - [ ] [Int] _isNotPartiallyPaused
      - [ ] Requires that the system is not partially paused, does not return true/false, just fails. 
      - [ ] Maybe it's a function because of the contract size?
        - No, because it's called only once.
    - [ ] [Int] _isNotFullyPaused
      - [ ] Same as `_isNotPartiallyPaused`
    - [ ] [Int] _isAuthorized
      - [ ] Same as `_isNotPartiallyPaused`
    - [ ] [Ext] initialize #
       - modifiers: initializer
    - [ ] [Ext] donate #
      - [ ] Calls an external contract to transfer funds to itself.
    - [ ] [Ext] setSystemPartiallyPaused #
       - modifiers: onlyPartialPauser
    - [ ] [Ext] setSystemFullyPaused #
       - modifiers: onlyFullPauser
    - [ ] [Ext] setFullPauser #
       - modifiers: onlyOwner
    - [ ] [Ext] setPartialPauser #
       - modifiers: onlyOwner
    - [ ] [Ext] setCallRestriction #
       - modifiers: onlyOwner
         - [ ] Setting call restriction to false will allow users to force the contract to call other methods on random (non-whitelisted) contracts.
           - [ ] Seems that the method `_call` externally calls `callFunction` on any random contract. So this means that the external call is rather restricted, which isn't clear if it's useful or not.
    - [ ] [Ext] setOperator #
      - [ ] Gives power to an operator.
    - [ ] [Ext] refreshConfiguration #
       - modifiers: onlyOwner
    - [ ] [Ext] setNakedCap #
       - modifiers: onlyOwner
    - [ ] [Ext] operate #
       - modifiers: nonReentrant,notFullyPaused
         - Why does this have `nonReentrant`?
    - [ ] [Ext] sync #
       - modifiers: nonReentrant,notFullyPaused
         - Why does this have `nonReentrant`?
         - [ ] One can frontrun the sync()
    - [x] [Ext] isOperator
    - [x] [Ext] getConfiguration
    - [x] [Ext] getProceed
    - [x] [Ext] isLiquidatable
    - [ ] [Pub] getPayout
    - [ ] [Ext] isSettlementAllowed
    - [x] [Ext] canSettleAssets
    - [ ] [Ext] getAccountVaultCounter
    - [ ] [Ext] hasExpired
    - [x] [Ext] getVault
    - [x] [Pub] getVaultWithDetails
    - [x] [Ext] getNakedCap
    - [x] [Ext] getNakedPoolBalance
    - [ ] [Int] _runActions #
    - [ ] [Int] _verifyFinalState
    - [x] [Int] _openVault #
       - modifiers: notPartiallyPaused,onlyAuthorized
    - [ ] [Int] _depositLong #
       - modifiers: notPartiallyPaused,onlyAuthorized
    - [ ] [Int] _withdrawLong #
       - modifiers: notPartiallyPaused,onlyAuthorized
    - [ ] [Int] _depositCollateral #
       - modifiers: notPartiallyPaused,onlyAuthorized
    - [ ] [Int] _withdrawCollateral #
       - modifiers: notPartiallyPaused,onlyAuthorized
    - [ ] [Int] _mintOtoken #
       - modifiers: notPartiallyPaused,onlyAuthorized
       - [x] Is this free? It doesn't seem to require any payment or anything. o__O
         - No, this is verified by `_verifyFinalState`.
    - [ ] [Int] _burnOtoken #
       - modifiers: notPartiallyPaused,onlyAuthorized
    - [ ] [Int] _redeem #
    - [ ] [Int] _settleVault #
       - modifiers: onlyAuthorized
    - [ ] [Int] _liquidate #
       - modifiers: notPartiallyPaused
    - [ ] [Int] _call #
       - modifiers: notPartiallyPaused,onlyWhitelistedCallee
    - [x] [Int] _checkVaultId
    - [ ] [Int] _isNotEmpty
    - [ ] [Int] _isCalleeWhitelisted
    - [ ] [Int] _isLiquidatable
    - [ ] [Int] _getOtokenDetails
    - [ ] [Int] _canSettleAssets
    - [ ] [Int] _refreshConfigInternal #

- [ ] core/MarginCalculator.sol
    - [ ] [Pub] <Constructor> #
    - [ ] [Ext] setCollateralDust #
       - modifiers: onlyOwner
    - [ ] [Ext] setUpperBoundValues #
       - modifiers: onlyOwner
    - [ ] [Ext] updateUpperBoundValue #
       - modifiers: onlyOwner
    - [ ] [Ext] setSpotShock #
       - modifiers: onlyOwner
    - [ ] [Ext] setOracleDeviation #
       - modifiers: onlyOwner
    - [ ] [Ext] getCollateralDust
    - [ ] [Ext] getTimesToExpiry
    - [ ] [Ext] getMaxPrice
    - [ ] [Ext] getSpotShock
    - [ ] [Ext] getOracleDeviation
    - [ ] [Ext] getNakedMarginRequired
    - [ ] [Ext] getExpiredPayoutRate
    - [ ] [Ext] isLiquidatable
    - [ ] [Ext] getMarginRequired
    - [ ] [Pub] getExcessCollateral
    - [ ] [Int] _getExpiredCashValue
    - [ ] [Int] _getMarginRequired
    - [ ] [Int] _getNakedMarginRequired
    - [ ] [Int] _findUpperBoundValue
    - [ ] [Int] _getPutSpreadMarginRequired
    - [ ] [Int] _getCallSpreadMarginRequired
    - [ ] [Int] _convertAmountOnLivePrice
    - [ ] [Int] _convertAmountOnExpiryPrice
    - [ ] [Int] _getDebtPrice
    - [ ] [Int] _getVaultDetails
    - [ ] [Int] _getExpiredSpreadCashValue
    - [ ] [Int] _isNotEmpty
    - [ ] [Int] _checkIsValidVault
    - [ ] [Int] _isMarginableLong
    - [ ] [Int] _isMarginableCollateral
    - [ ] [Int] _getProductHash
    - [ ] [Int] _getCashValue
    - [ ] [Int] _getOtokenDetails

- [ ] external/callees/PermitCallee.sol
    - [ ] [Ext] callFunction #
      - [ ] [EIP-2612](https://eips.ethereum.org/EIPS/eip-2612) not recommended because it is likely to change
      - [x] Replay possible (?)
        - Not possible because the ERC20 implementation should implement it correctly. Check is not in this contract.

- [ ] libs/MarginVault.sol
  - [ ] Check if you can use the multiple option (even though they say it's not supported)
    - [ ] [Ext] addShort #
    - [ ] [Ext] removeShort #
    - [ ] [Ext] addLong #
    - [ ] [Ext] removeLong #
    - [ ] [Ext] addCollateral #
    - [ ] [Ext] removeCollateral #

Global ideas:
- [ ] Can frontrun people when they touch their vaults
- [ ] Nobody (Controller should) calls `MarginPool.batchTransferToPool`